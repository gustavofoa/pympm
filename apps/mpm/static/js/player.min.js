function updatePlayerDataElement(){ACTUAL_SCHEDULE=playingSchedules.length>0?playingSchedules[playingSchedules.length-1].schedule:"";var e=ACTUAL_SCHEDULE;PLAYER_SHOW_MUSIC_NAME&&ACTUAL_PLAYING_TRACK&&(""!=e?e+=" - <strong>Tocando agora: "+ACTUAL_PLAYING_TRACK+"</strong>":e="Tocando agora: "+ACTUAL_PLAYING_TRACK),0==$(".rf-player .rf-playing-now marquee").length&&$(".rf-player .rf-playing-now").html("<marquee></marquee>"),$(".rf-player .rf-playing-now marquee").html(e)}var RF_PLAYER_INITIALIZED=!1,RF_PLAYER_OFFLINE=!1,ACTUAL_PLAYING_TRACK=!1,ACTUAL_SCHEDULE="",STREAMING_ADDRESS="http://streaming17.brlogic.com:8180/live",STREAMING_PORT="8180",STREAMING_ADDRESS_ONLY="streaming17.brlogic.com",STREAMING_TYPE="audio/mpeg",NEXT_SCHEDULES={65915:{id:"65915",schedule:'Ouvindo as melhores músicas católicas com Site "Músicas para Missa" das 00:00 às 23:59',start:38426,end:124766},65914:{id:65914,schedule:'Ouvindo as melhores músicas católicas com Site "Músicas para Missa" das 00:00 às 23:59',start:0,end:38366}},PLAYER_AUTH_HASH="ad785f967e9b312626bcfd813dfa66d3",PLAYER_ID="1",PLAYER_AUTOSTART=!1,PLAYER_SHOW_MUSIC_NAME=!1,BRLOGIC_STREAMING=!0,USE_PLAYER=!0,USE_PLAYER_PROXY=!1,playingSchedules=[],RfPlayer=new function(){var e=this;this.volume=1,this.playing=!1,this.audioSource="",this.playerElement=null,this.playerSource=null,this.playButton=null,this.pauseButton=null,this.volumeAreaElement=null,this.volumeMeterElement=null,this.initialize=function(a){return $.each(NEXT_SCHEDULES,function(e,a){setTimeout(function(){playingSchedules.push(a),updatePlayerDataElement()},1e3*a.start),setTimeout(function(){$.each(playingSchedules,function(e,l){"undefined"!=typeof l&&l.id==a.id&&playingSchedules.splice(e,1)}),updatePlayerDataElement()},1e3*a.end)}),e.audioSource=a.audioSource,e.hasAudioSupport()?(e.playerElement=$("#rf-player"),""==e.playerElement[0].canPlayType(a.streamType)?void e.flashFallback():(e.playerSource=e.playerElement.find("source").first(),e.playButton=$("#rf-player-play"),e.pauseButton=$("#rf-player-pause"),e.volumeAreaElement=$("#rf-player-volume-area"),e.volumeMeterElement=$("#rf-player-volume-meter"),e.volumeMeterElement.css({width:parseInt(e.volumeAreaElement[0].offsetWidth)+"px"}),e.playButton.on("click",e.play),e.pauseButton.on("click",e.pause),e.volumeAreaElement.on("click",e.changeVolumeByClicking),e.playerElement.on("error",e.audioSourceError),void(PLAYER_AUTOSTART&&!IS_MOBILE&&e.play()))):void e.flashFallback()},this.play=function(){e.playing=!0,e.playerSource[0].src=e.audioSource,e.playerElement[0].load(),e.playerElement[0].play(),e.pauseButton.addClass("active"),e.playButton.removeClass("active")},this.pause=function(){e.playing=!1,e.playerSource[0].src="",e.playerElement[0].load(),e.playerElement[0].pause(),e.pauseButton.removeClass("active"),e.playButton.addClass("active")},this.changeVolumeByClicking=function(a){var l=a.clientX-e.volumeAreaElement.offset().left;l>0&&(e.volumeMeterElement.css({width:l+"px"}),e.volume=l/e.volumeAreaElement.width(),e.playerElement[0].volume=e.volume)},this.hasAudioSupport=function(){return!!document.createElement("audio").canPlayType},this.audioSourceError=function(){e.playing&&e.flashFallback()},this.flashFallback=function(){var a={file:e.audioSource+"?type=.flv",provider:"http","http.startparam":"starttime",autostart:PLAYER_AUTOSTART&&!IS_MOBILE,icons:!1,skin:BASE_ASSETS+"players/"+PLAYER_ID+"/skin.zip",start:1,duration:"-1",bufferlength:"5",scale:"exactFit"};swfobject.embedSWF(BASE_ASSETS+"players/player.swf","rf-player-container","100%","100%","9.0.115","false",a,{allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent"},{id:"jwplayer",name:"jwplayer"},function(e){e.success||console.log("NÃ£o compatÃ­vel")})},this.refreshPlayerData=function(){var a=3e4;if(BRLOGIC_STREAMING&&$(".rf-player").length&&!RF_PLAYER_OFFLINE){var l=a,t="http://cdn-api-streaming.brlogic.com/index.php/api/unsafeget/allstatus/"+STREAMING_PORT+"/"+PLAYER_AUTH_HASH+"/"+STREAMING_ADDRESS_ONLY;"undefined"!=typeof USE_PLAYER_PROXY&&USE_PLAYER_PROXY&&(t="/player/proxy?address="+STREAMING_ADDRESS_ONLY+"&port="+STREAMING_PORT),$.ajax({url:t,dataType:"json",success:function(a){IS_MOBILE=a.isMobile,RF_PLAYER_INITIALIZED||1!=a.streamingStatus||(RfPlayer.initialize({audioSource:STREAMING_ADDRESS,streamType:a.streamingType}),RF_PLAYER_INITIALIZED=!0),0==a.streamingStatus?(RF_PLAYER_OFFLINE=!0,$(".rf-player-container").html('<img class="offline-image" src="'+BASE_ASSETS+'img/website/streaming-offline.png" />')):(ACTUAL_PLAYING_TRACK=a.currentTrack,PLAYER_SHOW_MUSIC_NAME||(l=6e5),updatePlayerDataElement(),setTimeout(e.refreshPlayerData,l))},error:function(){setTimeout(e.refreshPlayerData,l)}})}}};$(document).ready(function(){RfPlayer.refreshPlayerData(),BRLOGIC_STREAMING||RF_PLAYER_INITIALIZED||(RfPlayer.initialize({audioSource:STREAMING_ADDRESS,streamType:STREAMING_TYPE}),0==$(".rf-player .rf-playing-now marquee").length&&$(".rf-player .rf-playing-now").html("<marquee></marquee>"),$(".rf-player .rf-playing-now marquee").html(ACTUAL_SCHEDULE),RF_PLAYER_INITIALIZED=!0)});
