/**
 * Description: js for the Musics Star Ratings.
 */
!function(s,t,n,r){s.fn.starratings=function(t){s.fn.starratings.options=s.extend({ajaxurl:null,grs:!1,msg:"Rate this post",fuelspeed:400,thankyou:"Thank you for rating.",error_msg:"An error occured.",tooltip:!0,tooltips:{0:{tip:"Poor",color:"red"},1:{tip:"Fair",color:"brown"},2:{tip:"Average",color:"orange"},3:{tip:"Good",color:"blue"},4:{tip:"Excellent",color:"green"}}},s.fn.starratings.options,t?t:{});var n=[];return this.each(function(){n.push(s(this))}),s.fn.starratings.fetch(n,0,"0%",s.fn.starratings.options.msg,!0),this.each(function(){})},s.fn.starratings.animate=function(t){if(t.hasClass("disabled"))s(".sr-stars a",t).unbind("click").click(function(){return!1});else{var n=s(".sr-legend",t).html(),r=s(".sr-fuel",t).css("width");s(".sr-stars a",t).hover(function(){if(!t.hasClass("disabled")){var r=s(this).attr("href").split("#")[1];0!=s.fn.starratings.options.tooltip&&(null!=s.fn.starratings.options.tooltips[r-1]?s(".sr-legend",t).html('<span style="color:'+s.fn.starratings.options.tooltips[r-1].color+'">'+s.fn.starratings.options.tooltips[r-1].tip+"</span>"):s(".sr-legend",t).html(n)),s(".sr-fuel",t).stop(!0,!0).css("width","0%"),s(".sr-stars a",t).each(function(n,a){var i=s(this),e=i.attr("href").split("#")[1];parseInt(e)<=parseInt(r)&&(s(".sr-stars a",t).stop(!0,!0),i.hide().addClass("sr-star").addClass("orange").fadeIn("fast"))})}},function(){t.hasClass("disabled")||(s(".sr-stars a",t).removeClass("sr-star").removeClass("orange"),0!=s.fn.starratings.options.tooltip&&s(".sr-legend",t).html(n),s(".sr-fuel",t).stop(!0,!0).animate({width:r},s.fn.starratings.options.fuelspeed))}).unbind("click").click(function(){return s.fn.starratings.click(t,s(this).attr("href").split("#")[1])})}},s.fn.starratings.update=function(t,n,r,a,i){"true"==a&&s(".sr-fuel",t).removeClass("yellow").addClass("orange"),s(".sr-fuel",t).stop(!0,!0).animate({width:n},s.fn.starratings.options.fuelspeed,"linear",function(){"true"==a&&(t.addClass("disabled"),s(".sr-stars a",t).unbind("hover")),s.fn.starratings.options.grs&&i?s.fn.starratings.animate(t):s(".sr-legend",t).stop(!0,!0).hide().html(r?r:s.fn.starratings.options.msg).fadeIn("slow",function(){s.fn.starratings.animate(t)})})},s.fn.starratings.click=function(t,n){s(".sr-stars a",t).unbind("hover").unbind("click").removeClass("sr-star").removeClass("orange").click(function(){return!1});var r=s(".sr-legend",t).html(),a=s(".sr-fuel",t).css("width");return s.fn.starratings.fetch(t,n,a,r,!1),!1},s.fn.starratings.fetch=function(t,r,a,i,e){var o=[];s.each(t,function(){o.push(s(this).attr("data-id"))}),s.ajax({url:s.fn.starratings.options.ajaxurl,data:"id="+o+"&stars="+r,type:"post",dataType:"json",beforeSend:function(a,i){function e(s){var t=null;if(n.cookie&&""!=n.cookie)for(var r=n.cookie.split(";"),a=0;a<r.length;a++){var i=jQuery.trim(r[a]);if(i.substring(0,s.length+1)==s+"="){t=decodeURIComponent(i.substring(s.length+1));break}}return t}s(".sr-fuel",t).animate({width:"0%"},s.fn.starratings.options.fuelspeed),r&&s(".sr-legend",t).fadeOut("fast",function(){s(".sr-legend",t).html('<span style="color: green">'+s.fn.starratings.options.thankyou+"</span>")}).fadeIn("slow"),/^http:.*.do/.test(i.url)||/^https:.*/.test(i.url)||a.setRequestHeader("X-CSRFToken",e("csrftoken"))},success:function(n){s.each(t,function(){var t=s(this),r=t.attr("data-id");n[r]&&(n[r].success?s.fn.starratings.update(t,n[r].fuel+"%",n[r].legend,n[r].disable,e):s.fn.starratings.update(t,a,i,!1,e))})},complete:function(){},error:function(n){s(".sr-legend",t).fadeOut("fast",function(){s(".sr-legend",t).html('<span style="color: red">'+s.fn.starratings.options.error_msg+"</span>")}).fadeIn("slow",function(){s.fn.starratings.update(t,a,i,!1,e)})}})},s.fn.starratings.options={ajaxurl:starratings_config_js.ajaxurl,func:starratings_config_js.func,grs:starratings_config_js.grs,tooltip:starratings_config_js.tooltip,tooltips:starratings_config_js.tooltips,msg:starratings_config_js.msg,fuelspeed:starratings_config_js.fuelspeed,thankyou:starratings_config_js.thankyou,error_msg:starratings_config_js.error_msg}}(jQuery,window,document),jQuery(document).ready(function(s){s(".star-ratings").starratings()});
